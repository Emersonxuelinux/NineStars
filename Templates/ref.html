<html>
<body>
{{ res }}
<div id="new">
<span id="ooxx">{{ res }}</span>
</div>
{{ xx }}

<script>
    function getNewContent(){
        var request = new XMLHttpRequest();

            if (request){
                    request.open("GET", "/refp", false);
                    request.onreadystatechange = function(){
                        if (request.readyState == 4){
                          //  var oldele = document.getElementById("ooxx");
                         //   var para = document.createElement("p");
                          //  var txt = document.createTextNode(request.responseText);
                          var txt = request.responseText;
                       //   var txt = "xxx";
                      //      para.appendChild(txt);
                       //    document.getElementById("new").replaceChild(para, oldele);
                         // document.getElementById("new").appendChild(para);
                         document.getElementById("new").innerHTML = txt;

                                }
                        }

                    request.send(null);
            } else {
                alert('Sorry, your browser doesn\'t support XMLHttpRequest' );
            }
    Ttt = setTimeout(getNewContent, 1000);
    if(request.responseText=="exit"){

        clearTimeout(Ttt);

    }
}

    function get(){
                getNewContent()
    }

    window.onload=get();

</script>
</body>
</html>